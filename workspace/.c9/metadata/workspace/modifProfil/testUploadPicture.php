{"filter":false,"title":"testUploadPicture.php","tooltip":"/modifProfil/testUploadPicture.php","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":2,"column":4},"end":{"row":2,"column":5},"action":"remove","lines":["t"],"id":726}],[{"start":{"row":2,"column":3},"end":{"row":2,"column":4},"action":"remove","lines":["n"],"id":727}],[{"start":{"row":2,"column":2},"end":{"row":2,"column":3},"action":"remove","lines":["i"],"id":728}],[{"start":{"row":2,"column":1},"end":{"row":2,"column":2},"action":"remove","lines":["r"],"id":729}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":1},"action":"remove","lines":["p"],"id":730}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":1},"action":"insert","lines":["e"],"id":731}],[{"start":{"row":2,"column":1},"end":{"row":2,"column":2},"action":"insert","lines":["c"],"id":732}],[{"start":{"row":2,"column":2},"end":{"row":2,"column":3},"action":"insert","lines":["h"],"id":733}],[{"start":{"row":2,"column":3},"end":{"row":2,"column":4},"action":"insert","lines":["o"],"id":734}],[{"start":{"row":2,"column":4},"end":{"row":2,"column":5},"action":"insert","lines":[" "],"id":735}],[{"start":{"row":2,"column":5},"end":{"row":2,"column":6},"action":"insert","lines":["\""],"id":736}],[{"start":{"row":7,"column":6},"end":{"row":7,"column":7},"action":"remove","lines":[">"],"id":737}],[{"start":{"row":7,"column":5},"end":{"row":7,"column":6},"action":"remove","lines":["m"],"id":738}],[{"start":{"row":7,"column":4},"end":{"row":7,"column":5},"action":"remove","lines":["r"],"id":739}],[{"start":{"row":7,"column":3},"end":{"row":7,"column":4},"action":"remove","lines":["o"],"id":740}],[{"start":{"row":7,"column":2},"end":{"row":7,"column":3},"action":"remove","lines":["f"],"id":741}],[{"start":{"row":7,"column":1},"end":{"row":7,"column":2},"action":"remove","lines":["/"],"id":742}],[{"start":{"row":7,"column":0},"end":{"row":7,"column":1},"action":"remove","lines":["<"],"id":743}],[{"start":{"row":7,"column":2},"end":{"row":7,"column":3},"action":"remove","lines":[";"],"id":744}],[{"start":{"row":7,"column":1},"end":{"row":7,"column":2},"action":"remove","lines":[")"],"id":745}],[{"start":{"row":7,"column":0},"end":{"row":7,"column":1},"action":"remove","lines":["\""],"id":746}],[{"start":{"row":6,"column":58},"end":{"row":7,"column":0},"action":"remove","lines":["",""],"id":747}],[{"start":{"row":6,"column":58},"end":{"row":6,"column":59},"action":"insert","lines":["\""],"id":748}],[{"start":{"row":6,"column":59},"end":{"row":6,"column":60},"action":"insert","lines":[";"],"id":749}],[{"start":{"row":2,"column":5},"end":{"row":2,"column":6},"action":"remove","lines":["\""],"id":750}],[{"start":{"row":2,"column":5},"end":{"row":2,"column":6},"action":"insert","lines":["p"],"id":751}],[{"start":{"row":2,"column":6},"end":{"row":2,"column":7},"action":"insert","lines":["r"],"id":752}],[{"start":{"row":2,"column":7},"end":{"row":2,"column":8},"action":"insert","lines":["i"],"id":753}],[{"start":{"row":2,"column":8},"end":{"row":2,"column":9},"action":"insert","lines":["n"],"id":754}],[{"start":{"row":2,"column":9},"end":{"row":2,"column":10},"action":"insert","lines":["t"],"id":755}],[{"start":{"row":2,"column":10},"end":{"row":2,"column":11},"action":"insert","lines":["("],"id":756}],[{"start":{"row":2,"column":11},"end":{"row":2,"column":12},"action":"insert","lines":["'"],"id":757}],[{"start":{"row":6,"column":59},"end":{"row":6,"column":60},"action":"remove","lines":[";"],"id":758}],[{"start":{"row":6,"column":58},"end":{"row":6,"column":59},"action":"remove","lines":["\""],"id":759}],[{"start":{"row":6,"column":58},"end":{"row":6,"column":59},"action":"insert","lines":["'"],"id":760}],[{"start":{"row":6,"column":59},"end":{"row":6,"column":60},"action":"insert","lines":[")"],"id":761}],[{"start":{"row":6,"column":60},"end":{"row":6,"column":61},"action":"insert","lines":[";"],"id":762}],[{"start":{"row":9,"column":0},"end":{"row":9,"column":1},"action":"insert","lines":["<"],"id":763}],[{"start":{"row":9,"column":1},"end":{"row":9,"column":2},"action":"insert","lines":["?"],"id":764}],[{"start":{"row":9,"column":2},"end":{"row":9,"column":3},"action":"insert","lines":["p"],"id":765}],[{"start":{"row":9,"column":3},"end":{"row":9,"column":4},"action":"insert","lines":["h"],"id":766}],[{"start":{"row":9,"column":4},"end":{"row":9,"column":5},"action":"insert","lines":["p"],"id":767}],[{"start":{"row":0,"column":0},"end":{"row":6,"column":61},"action":"remove","lines":["<?php","","echo print('<form method=\"post\" action=\"modifProfil.php\" enctype=\"multipart/form-data\">","     <input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"1048576\" /> //Taille maximum dupload de fichier","     <label for=\"profilePicture\">Sélectionnez votre photo de profil (JPG, PNG ou GIF | max. 1 Mo) :</label><br />","     <input type=\"file\" name=\"profilePicture\" id=\"profilePicture\" /><br />","     <input type=\"submit\" name=\"submit\" value=\"Valider\" />');"],"id":768}],[{"start":{"row":0,"column":0},"end":{"row":7,"column":7},"action":"insert","lines":["<!-- Le type d'encodage des données, enctype, DOIT être spécifié comme ce qui suit -->","<form enctype=\"multipart/form-data\" action=\"_URL_\" method=\"post\">","  <!-- MAX_FILE_SIZE doit précéder le champ input de type file -->","  <input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"30000\" />","  <!-- Le nom de l'élément input détermine le nom dans le tableau $_FILES -->","  Envoyez ce fichier : <input name=\"userfile\" type=\"file\" />","  <input type=\"submit\" value=\"Envoyer le fichier\" />","</form>"],"id":769}],[{"start":{"row":10,"column":4},"end":{"row":10,"column":5},"action":"remove","lines":["p"],"id":770}],[{"start":{"row":10,"column":3},"end":{"row":10,"column":4},"action":"remove","lines":["h"],"id":771}],[{"start":{"row":10,"column":2},"end":{"row":10,"column":3},"action":"remove","lines":["p"],"id":772}],[{"start":{"row":10,"column":1},"end":{"row":10,"column":2},"action":"remove","lines":["?"],"id":773}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":1},"action":"remove","lines":["<"],"id":774}],[{"start":{"row":9,"column":41},"end":{"row":10,"column":0},"action":"remove","lines":["",""],"id":775}],[{"start":{"row":9,"column":41},"end":{"row":10,"column":0},"action":"insert","lines":["",""],"id":776}],[{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""],"id":777}],[{"start":{"row":8,"column":0},"end":{"row":8,"column":1},"action":"insert","lines":["<"],"id":778}],[{"start":{"row":8,"column":1},"end":{"row":8,"column":2},"action":"insert","lines":["?"],"id":779}],[{"start":{"row":8,"column":2},"end":{"row":8,"column":3},"action":"insert","lines":["o"],"id":780}],[{"start":{"row":8,"column":3},"end":{"row":8,"column":4},"action":"insert","lines":["h"],"id":781}],[{"start":{"row":8,"column":3},"end":{"row":8,"column":4},"action":"remove","lines":["h"],"id":782}],[{"start":{"row":8,"column":2},"end":{"row":8,"column":3},"action":"remove","lines":["o"],"id":783}],[{"start":{"row":8,"column":1},"end":{"row":8,"column":2},"action":"remove","lines":["?"],"id":784}],[{"start":{"row":8,"column":0},"end":{"row":8,"column":1},"action":"remove","lines":["<"],"id":785}],[{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""],"id":786}],[{"start":{"row":9,"column":0},"end":{"row":9,"column":1},"action":"insert","lines":["<"],"id":787}],[{"start":{"row":9,"column":1},"end":{"row":9,"column":2},"action":"insert","lines":["?"],"id":788}],[{"start":{"row":9,"column":2},"end":{"row":9,"column":3},"action":"insert","lines":["p"],"id":789}],[{"start":{"row":9,"column":3},"end":{"row":9,"column":4},"action":"insert","lines":["h"],"id":790}],[{"start":{"row":9,"column":4},"end":{"row":9,"column":5},"action":"insert","lines":["p"],"id":791}],[{"start":{"row":1,"column":44},"end":{"row":1,"column":49},"action":"remove","lines":["_URL_"],"id":792},{"start":{"row":1,"column":44},"end":{"row":1,"column":45},"action":"insert","lines":["m"]}],[{"start":{"row":1,"column":45},"end":{"row":1,"column":46},"action":"insert","lines":["o"],"id":793}],[{"start":{"row":1,"column":46},"end":{"row":1,"column":47},"action":"insert","lines":["d"],"id":794}],[{"start":{"row":1,"column":47},"end":{"row":1,"column":48},"action":"insert","lines":["i"],"id":795}],[{"start":{"row":1,"column":48},"end":{"row":1,"column":49},"action":"insert","lines":["f"],"id":796}],[{"start":{"row":1,"column":49},"end":{"row":1,"column":50},"action":"insert","lines":["P"],"id":797}],[{"start":{"row":1,"column":50},"end":{"row":1,"column":51},"action":"insert","lines":["r"],"id":798}],[{"start":{"row":1,"column":51},"end":{"row":1,"column":52},"action":"insert","lines":["i"],"id":799}],[{"start":{"row":1,"column":51},"end":{"row":1,"column":52},"action":"remove","lines":["i"],"id":800}],[{"start":{"row":1,"column":51},"end":{"row":1,"column":52},"action":"insert","lines":["o"],"id":801}],[{"start":{"row":1,"column":52},"end":{"row":1,"column":53},"action":"insert","lines":["f"],"id":802}],[{"start":{"row":1,"column":53},"end":{"row":1,"column":54},"action":"insert","lines":["i"],"id":803}],[{"start":{"row":1,"column":54},"end":{"row":1,"column":55},"action":"insert","lines":["l"],"id":804}],[{"start":{"row":1,"column":55},"end":{"row":1,"column":56},"action":"insert","lines":["."],"id":805}],[{"start":{"row":1,"column":56},"end":{"row":1,"column":57},"action":"insert","lines":["p"],"id":806}],[{"start":{"row":1,"column":57},"end":{"row":1,"column":58},"action":"insert","lines":["h"],"id":807}],[{"start":{"row":1,"column":58},"end":{"row":1,"column":59},"action":"insert","lines":["p"],"id":808}],[{"start":{"row":11,"column":0},"end":{"row":29,"column":50},"action":"remove","lines":["//FONCTION D'UPLOAD D'UNE PHOTO DE PROFIL","","function upload($index,$destination,$maxsize=FALSE,$extensions=FALSE)","{","   //Test1: fichier correctement uploadé","     if (!isset($_FILES[$index]) OR $_FILES[$index]['error'] > 0) return FALSE;","   //Test2: taille limite","     if ($maxsize !== FALSE AND $_FILES[$index]['size'] > $maxsize) return FALSE;","   //Test3: extension","     $ext = substr(strrchr($_FILES[$index]['name'],'.'),1);","     if ($extensions !== FALSE AND !in_array($ext,$extensions)) return FALSE;","   //Déplacement","     return move_uploaded_file($_FILES[$index]['tmp_name'],$destination);","}"," ","//EXEMPLES","  $upload1 = upload('profilePicture','monicone1',15360, array('png','gif','jpg','jpeg') );"," ","  if ($upload1) \"Upload de l'icone réussi!<br />\";"],"id":809}],[{"start":{"row":10,"column":0},"end":{"row":11,"column":0},"action":"remove","lines":["",""],"id":810}],[{"start":{"row":10,"column":0},"end":{"row":11,"column":0},"action":"insert","lines":["",""],"id":811}],[{"start":{"row":10,"column":0},"end":{"row":11,"column":0},"action":"insert","lines":["",""],"id":812}],[{"start":{"row":9,"column":0},"end":{"row":13,"column":2},"action":"remove","lines":["<?php","","","","?>"],"id":813},{"start":{"row":9,"column":0},"end":{"row":30,"column":2},"action":"insert","lines":["<?php","// Dans les versions de PHP antiéreures à 4.1.0, la variable $HTTP_POST_FILES","// doit être utilisée à la place de la variable $_FILES.","","$uploaddir = '/var/www/uploads/';","$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);","","echo '<pre>';","if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {","    echo \"Le fichier est valide, et a été téléchargé","           avec succès. Voici plus d'informations :\\n\";","} else {","    echo \"Attaque potentielle par téléchargement de fichiers.","          Voici plus d'informations :\\n\";","}","","echo 'Voici quelques informations de débogage :';","print_r($_FILES);","","echo '</pre>';","","?>"]}],[{"start":{"row":13,"column":14},"end":{"row":13,"column":22},"action":"remove","lines":["/var/www"],"id":814}],[{"start":{"row":1,"column":44},"end":{"row":1,"column":55},"action":"remove","lines":["modifProfil"],"id":815},{"start":{"row":1,"column":44},"end":{"row":1,"column":45},"action":"insert","lines":["a"]}],[{"start":{"row":1,"column":45},"end":{"row":1,"column":46},"action":"insert","lines":["p"],"id":816}],[{"start":{"row":1,"column":46},"end":{"row":1,"column":47},"action":"insert","lines":["r"],"id":817}],[{"start":{"row":1,"column":47},"end":{"row":1,"column":48},"action":"insert","lines":["e"],"id":818}],[{"start":{"row":1,"column":48},"end":{"row":1,"column":49},"action":"insert","lines":["s"],"id":819}],[{"start":{"row":1,"column":49},"end":{"row":1,"column":50},"action":"insert","lines":["U"],"id":820}],[{"start":{"row":1,"column":50},"end":{"row":1,"column":51},"action":"insert","lines":["p"],"id":821}],[{"start":{"row":1,"column":51},"end":{"row":1,"column":52},"action":"insert","lines":["l"],"id":822}],[{"start":{"row":1,"column":52},"end":{"row":1,"column":53},"action":"insert","lines":["o"],"id":823}],[{"start":{"row":1,"column":53},"end":{"row":1,"column":54},"action":"insert","lines":["a"],"id":824}],[{"start":{"row":1,"column":54},"end":{"row":1,"column":55},"action":"insert","lines":["d"],"id":825}],[{"start":{"row":9,"column":0},"end":{"row":30,"column":2},"action":"remove","lines":["<?php","// Dans les versions de PHP antiéreures à 4.1.0, la variable $HTTP_POST_FILES","// doit être utilisée à la place de la variable $_FILES.","","$uploaddir = '/uploads/';","$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);","","echo '<pre>';","if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {","    echo \"Le fichier est valide, et a été téléchargé","           avec succès. Voici plus d'informations :\\n\";","} else {","    echo \"Attaque potentielle par téléchargement de fichiers.","          Voici plus d'informations :\\n\";","}","","echo 'Voici quelques informations de débogage :';","print_r($_FILES);","","echo '</pre>';","","?>"],"id":826}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":5,"column":56},"end":{"row":5,"column":56},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1461789930630,"hash":"c144a1de7fc15a5e0cef7cc7e760b713b2ea3d4d"}